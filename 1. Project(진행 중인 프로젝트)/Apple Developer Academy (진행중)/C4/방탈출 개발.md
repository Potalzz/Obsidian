## 수면가스 개발
### 개요
수면가스 모니터를 핀치하면 수면가스 모니터를 조작할 수 있는 windowr기반의 UI가 나오고, 수면가스 모니터 위에 있는 화면과 상호작용하여 값이 변경되게 한다.

#### 개발 순서
피그마 수면가스 모니터 이미지 가져옴
이미지 가져와서 윈도우 뷰로 모니터 위에 띄우기
윈도우 뷰에서 +-버튼 상호작용 테스트
모니터에 윈도우 화면 붙이기


**swiftUI뷰에 버튼에 따라 숫자 조작하고 변경되게**
**Attachment에 모니터 붙이기**
**모니터뷰에서 3,6,9맞으면 활성화 이미지 표시**
**숫자 맞으면 연기 particle나오도록**


### 기능 목록
- [x] 핀치를 통한 수면가스 모니터 선택
      tabGesture로 선택
- [ ] 수면가스 모니터 에셋 위에 Attachment를 통해 swiftUI 화면을 올린다
      모니터 위에 Plane깔고 위치 가져와서 그대로 올리기 (테스트 필요)
- [x] 모니터가 선택되면 window화면이 나온다
      tabGesture를 통해 bolean으로 판별
	- [x] swiftUI로 조작할 수 있는 윈도우 화면을 제작한다
- [ ] window 화면에서의 변경값이 수면가스 모니터에 반영된다.
      window화면이랑 같은 화면 쓰면 해결
- [ ] 모니터 화면에서 특정 숫자가 되면 수면가스가 나온다



### 체크리스트
- [x] 모니터 이미지 파일 +,-, 따로 받아서 뷰에 반영하기
- [ ] 새로운 수면가스 기기에 클릭했을 때 모달 나오게 하려면, 파일명과 메쉬명 겹치는 부분 없도록하기
- [ ] 침대랑 연기에 충돌 설정


### 이슈
#### 진행중
##### swiftUI View를 Attachments로 띄웠을 때 버튼에 hover효과가 버튼 크기와 다르게 적용되는 문제
1. RealityView의 attachments는 2D View를 3D 공간에 투영하는 원리이므로, 프레임 해상도와 스케일이 달라진다.
2. Immersive 환경에서는 View가 **디바이스에서 재투영(render-to-texture)** 되면서  `SwiftUI`에서 본 UI 비율과 실제 `RealityKit` 상의 UI 비율이 **달라짐**
3. visionOS는 버튼에 **자동 hoverEffect (visual affordance)** 를 추가하는데,이 효과는 "화면상 View의 크기 기준"으로 적용되므로 RealityView에서 **스케일이 줄어들면 hover 원도 더 작게 보임**

**해결 방안 1. 버튼을 교체해서 호버 효과 대체**
hover와 커서 효과를 모두 제거하고, 포커스 받을 때 색상이나 크기를 바꾸는 커스텀 뷰로 대체한다.

-> 근본적으로 문제를 해결하는 것이 아니라 버튼에 대해서만 꼼수로 적용

**해결 방안 2. 개별 Entity로 불러오기**
각기 버튼마다 Enity로 만들어서 불러오기.

-> immersiveView를 띄우는 화면에 불러오는 코드가 너무 많고 복잡해짐. 따로 모듈화가 가능해야함.


##### 제스처 여러개 등록하면 가장 위 제스처만 동작
``` swift
.simultaneousGesture(
    TapGesture(target: "Plane_008", showModal: $showPasswordModal)
)
```

`simultaneousGesture`를 통해서 해결

#### 해결
- [x] 모니터 위에 모달 띄우는 것은 가능한데, 모니터 축이 화면 중앙에 있음
      에셋 새로 불러와서 설정
![[첨부 파일 소스/Image File 1/Pasted image 20240216160511.png]]
$pull 연산자를 통해서 리뷰에 해당하는 객체 ID지우기.
$**pull**
- 배열에 있는 모든 인스턴스 중에 특정 조건에 만족하는 값 지우기.
- 위 식에서 reviews는 ID배열이고 reviewID는 라우트에 있는 id

express 라우터와 쿠키
라우트를 작성할 때 매번 /로 중복되는 주소를 입력하는 것과, 한 파일에 너무 많은 app이 있는 것을 방지하기 위해 router로 각각 쪼개줄 수 있다. 라우트를 먼저 만들어주고 정의한 라우트에 연결하여 /하나만 입력하면 해당 파일에서 라우트를 사용할 수 있다. 각 라우트 파일 처음에는 app use로 해당 라우트가 맞는지 if문으로 검증까지 하기 때문에 에러가 생기는 일도 방지해주게 된다. 

**쿠키**
쿠키는 사용자에 대한 정보를 저장하여 해당 사용자에게 맞춤 정보를 제공하는 것이다. HTTP는 무상태라서 최소한의 뭔가를 기억할 것이 필요하다. 쿠키가 사용하는 다른 옵션은 추적이다. 이것 때문에 법률 생김. 서버는 웹 페이지에서 사용자 요청을 받고 쿠키를 반환할 수 있다. 그게 그 사용자의 고유한 식별자가 된다. 그리고 사용자가 재방문할때마다 그 쿠키가 요청과 함께 전송됩니다. 그 페이지를 방문했는지 사용자가 사이트 안에서 몇개의 페이지를 봤는지 알 수 있다. 

**쿠키서명**
쿠키 서명은 암호화가 목적이 아니다, 편지봉투의 밀랍과 같이 정보가 조작되었는지 아닌지를 확인하기 위한 작업이다.

**HMAC**
**H**ash-based **M**essage **A**uthentication 

**세션**
세션이 나온 이유 
1. 쿠키에는 크기 제한 있음 => 브라우저에 저장하는데 브라우저에는 한계가 있기 때문에. 
2. 쿠키는 서버 측에 정보를 저장하지 않는다.
세션은 단기 저장소 같은 느낌 ?
브라우저와 연결된 정보를 저장하기 위해 존재한다.

**Express Session**
 - npm으로 express-session 설치만 하면 끝.
- 쿠키는 세션 내의 어느 정보도 포함하지 않는다.
- 세션은 훨씬 더 많은 정보를 저장할 수 있다.

Session resave
- 요청 중 수정 사항이 없더라도 세션이 세션 저장소에 다시 저장될 수 있게 함. 말 그대로 resave


 
 

## 구현된 기능들

### 1. FirestoreManager 확장

- **배열 필드 업데이트**: `updateArrayField` - 멤버 추가/제거
- **중첩 컬렉션 CRUD**: 댓글 관리
- **다중 필드 업데이트**: `updateMultipleFields`

### 2. PartyDetailViewModel 주요 기능

**파티 정보 관련:**

- `fetchPartyDetail()`: 파티 정보 및 댓글 가져오기
- `refreshPartyDetail()`: 새로고침
- 조회수 자동 증가
- 자동 마감 체크

**파티장 기능:**

- `acceptWaitingMember()`: 대기 멤버 수락
- `rejectWaitingMember()`: 대기 멤버 거절
- `removeMember()`: 멤버 내보내기
- `updatePartyStatus()`: 파티 상태 변경
- `deleteParty()`: 파티 삭제

**파티원 기능:**

- `leaveParty()`: 파티 탈퇴

**공통 사용자 기능:**

- `applyToParty()`: 파티 참여 신청
- `cancelPartyApplication()`: 참여 신청 취소
- `addComment()`: 댓글 작성
- `toggleLike()`: 좋아요 토글
- `handleMainActionButton()`: 메인 액션 버튼 처리

### 3. 사용자 역할 관리

- `UserRole` enum: host, member, waitingMember, guest
- 역할에 따른 UI 및 기능 분기 처리
- 동적 버튼 텍스트 및 색상 변경

### 4. View 업데이트

- PartyDetailView: ViewModel 통합
- 각 하위 뷰들에 ViewModel 전달
- 실시간 상태 업데이트 반영

## 사용 예시

swift

```swift
// 파티 상세 화면 진입
NavigationLink(destination: 
    PartyDetailView(
        partyID: party.id.uuidString,
        currentUser: currentUser
    )
) {
    // 파티 리스트 아이템
}
```

## 추가 고려사항

1. **사용자 인증**: 현재 `getCurrentUser()`가 샘플 데이터를 반환하므로, 실제 로그인 시스템과 연결 필요
2. **좋아요 목록 관리**: 사용자별 좋아요 목록을 별도로 관리하는 기능 추가 필요
3. **실시간 업데이트**: Firestore의 실시간 리스너를 추가하여 다른 사용자의 변경사항도 실시간 반영
4. **이미지 업로드**: 프로필 이미지 및 파티 이미지 업로드 기능
5. **알림 기능**: 파티 상태 변경, 댓글 알림 등

이렇게 구현된 ViewModel은 View와 완전히 분리되어 있어 테스트가 용이하고, 모든 비즈니스 로직이 중앙화되어 유지보수가 편리합니다.
**플래시**
세션에서 사용자에게 메시지를 출력해 보내는 장소. 완료 메시지나 확인 메시지 같은거

![[첨부 파일 소스/Image File 1/Pasted image 20240217102154.png]]
`app.use("/campgrounds/:id/reviews", reviews);`을 라우터로 지정해주니,  캠프그라운드의 id를  req.params로 가져오지 못하는 문제가 생긴다. 
![[첨부 파일 소스/Image File 1/Pasted image 20240217102343.png]]
이럴 때는 라우터 파일에서 mergeParma: true를 넣어준다.

해시함수
비밀번호는 해시함수를 거쳐서 불규칙한 문자로 저장된다. 비밀번호가 텍스트 그대로 데이터베이스에 저장되는 일은 절대절대로 없어야 한다. 해시 함수는 비밀번호 글자가 한 글자만 달라도 값이 완전히 다르게 출력되게 만들어주어 유추를 할 수 없게 만든다. 또한 많은 양의 비밀번호를 시도하는 것을 방지하기 위해 해시함수는 일부러 느린 함수를 이용한다.

![[첨부 파일 소스/Image File 1/Pasted image 20240217145855.png]]
암호 생성. 숫자 11은 솔트 round숫자

becrypt.compare(pw, hashedpw)를 통해 암호 비교

**로그인 세션 확인**
![[첨부 파일 소스/Image File 1/Pasted image 20240217181807.png]]
if 문을 통해서 세션에 id가 존재하는지 확인하고 없으면 로그인 페이지로 응답보내고 아닐 경우 next실행. 이 변수를 세션확인이 필요한 라우터에 미들웨어로 넣어준다.
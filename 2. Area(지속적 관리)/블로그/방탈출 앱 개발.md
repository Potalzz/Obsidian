## 대략적인 작성 개요
방탈출 앱을 개발하게 된 이유

준비해야 할 부분(기술적 해결)

설계 내용
전체적인 구조
- 시나리오
- 에셋 찾기
- 찾은 에셋을 바탕으로 방 구현
- 방 구현하는 동안 개발 기능 테스트
- 개발단에서 방 불러오기
- 인터렉션 기능 및 필요한 기능 구현

문제점은 중간중간에 넣기
문제점
- 에셋 불러오기
	불러오는데 usdz로 불러오기, 한 번에 usdz로 뽑기 등등 에러 많아서 usda로 뽑고 reality converter에 넣고 직접 텍스쳐 연결해서 가져오는 방법이 best
- 물리 속성 부여
	코드로만 물리 속성을 부여하는 경우 안되는 에러 다수 발생. rcp에서 component에 속성을 부여해주고 코드로 설정을 해주어야함. 해당 방법을 몰라서 많이 헤맸다.
- 파티클 재생 안됨
	타임라인에 넣어주면 해결
- 이머시브 환경 제약
	mixed로 현실 배경을 얹는 형식으로 변경. 단점은 사물에 가까이 가도 현실 환경이 잘 보이지 않음. 사전에 가이드라인을 제공함으로써 예방

플레이 영상(유튜브)

심사 올려놓음
- 통과하면 추가로 작성


---
## 작성할 내용


Apple Developer Academy@POSTECH에서 Challenge 4 프로젝트로 6명이 한 팀을 이루어 visionOS로 하는 방탈출 앱을 만들었다.


앱을 구현하기 전에 우선, visionOS로 가능한 범위와 불가능한 범위를 파악하는 것이 중요했다.

![[../../assets/images/Pasted image 20250828204813.png]]

생각보다 제약사항이 많았다...


기술 조사를 진행하다가 알아낸 사실이지만, 공식적으로 지원하지 않는 기능이라고 해서 아예 불가능 한 것은 아니었다. 우회하는 방식으로 대부분 구현이 가능한 범위가 많았다.

카메라 데이터를 사용하지 못한다는 점에서 생각했었던 많은 아이디어들이 구현에 어려움을 겪었고, 방탈출 앱을 만들기로 하였다.

만들려는 앱의 특성상, 전체적인 스토리가 중요했기에 초반에는 해당 부분에 많은 힘을 쏟았다.

예상 플레이 타임인 10~15분에 맞춰 문제의 난이도를 설정하고 스토리에 맞춰 문제들을 설계했다.

[시나리오 구현 이미지 추가 예정]

시나리오를 설계한 다음엔  배경 구성에 투입되는 리소스를 줄이기 위해 모델링은 최대한 피하는 방향으로 하여 에셋 리서치작업을 하였다.

[에셋 리서치 이미지 추가 예정]

찾은 에셋을 바탕으로 러프하게 공간을 제작하고, 인터렉션 요소가 들어가는 에셋들을 우선적으로 추가해 기능을 테스트 하였다.

방 전체를 blender에서 구성하고 전체 에셋을 reality composer pro에서 불러온 뒤, 기능이 들어가는 에셋들만 blender에서 따로 export하여 불러왔다.

에셋을 불러오는 과정에서 텍스쳐가 깨지는 등 에러가 발생했는데, blender에서 확장자를 usdz로 지정하여 reality composer pro에서 바로 불러오는 경우 이런 에러가 종종 발생했고 reality composer pro로 usda파일을 넣고 직접 텍스쳐를 연결하여 usdz로 내보내는 방식이 가장 안정적으로 동작했다.

러프하게 방을 불러와서 구성했지만, 큰 문제가 발생했다.
full immersive space의 반경이 예상했던 1.5m x 1.5m 크기보다 훨씬 작은 약 1m 반경이여서 방 끝으로 걸어가면 immersive환경이 일시적으로 해제되고 현실이 보이는 문제였다.
해당 문제를 해결하기 위해서 immersive space가 깨지지 않는 다른 앱들을 살펴보고 도출해낸 방법은 mixed immersive space로 구성하여 현실 세계 위에 3d로 제작한 방을 얹는 형식으로 해결했다.
본래 mixed환경에서는 현실 배경에 물체를 올릴 수 있는데 해당 개념을 이용하여 엄청나게 큰 방을 올리는 형식의 트릭을 사용하여 해결했다.
다만, 이렇게 구현했을 때 단점은 가상 방 내부에서 움직였을 떄 현실의 사물이 가까워져도 현실 세계가 보이지 않아 주변 사물에 부딪힐 수 있다는 위험이 존재했다.
mixed 환경이기 때문에 현실 사물이 보여지는 거리를 조절할 수 없었기에 게임 시작 전 방 크기의 가이드라인을 제공하여 주변 사물을 치우라고 안내하는 형식으로 해결했다.

그 후 문제 풀이에 필요한 기능들을 추가하여 인터렉션과 애니메이션을 추가하여 기능을 구현했다.
기능을 구현하는 과정에서 발생했던 문제점들은, 물리 속성이나 애니메이션 재생이 필요한 경우 코드로만 구현했을 때 동작하지 않는다는 사실이였다. rcp에서 해당 개체에 추가하려는 물리 속성이나 애니메이션을 추가해주어야 한다. 애니메이션의 경우에는 reality composer pro 내에서 time line에 추가를 해줘야 올바르게 동작한다. 해당 부분에서 많은 시간이 소요되었다. 처음 개발하는 사람은 같은 실수를 겪지 않기를 바란다.

[reality composer pro에디터 내 사진 추가 예정]


팀원들과의 6주간의 챌린지가 끝이 났다. 방 탈출에 필요한 기본적인 기능은 모두 구현된 상태이고 끝나고 개체와 인터렉션하는 사용성 개선이 추가로 구현할 수 있는 사항으로 남아있다.

다음은 갤러리 워크를 진행하며 만든 기술 소개 영상이다

[기술 소개 영상 추가 예정]

챌린지가 끝나고 추후 보완에 필요한 부분들을 수정하고 언어를 한국어, 영어, 스페인어 총 3개 국어로 구성하여 앱스토어 심사를 올렸다.

약 1주일간의 심사 끝에 날아온 내용은 장황한 리젝 사유..

[심사 리젝 사유 이미지 추가 예정]

사실 내부적으로 크게 바꿔야 할 사항들은 없고, 앱 이름 변경과 자잘한 수정정도 ..?
그리고 특이한 점은 애플 측에서 해당 앱의 풀이 과정을 요구하였다는 점이다.

이후 다시 심사 결과가 오게 되면 추가할 예정이다.


## v2

Apple Developer Academy@POSTECH의 Challenge 4 프로젝트로 6명이 한 팀을 이루어 visionOS용 방탈출 앱을 만들었다.

앱을 구현하기 전에 먼저 visionOS에서 무엇이 가능한지, 무엇이 불가능한지를 파악하는 작업이 중요했다.

![[../../assets/images/Pasted image 20250828204813.png]]


조사해 보니 생각보다 제약이 많았다. 다만 공식 문서에 ‘지원하지 않는다’고 적혀 있다고 해서 절대 불가능한 것은 아니었다. 우회하는 방법을 통해 대부분의 기능을 구현할 수 있는 경우가 많았고, 그 점을 고려해 개발 범위를 조정했다.

카메라 데이터 사용이 불가능하다는 제약 때문에 원래 생각했던 몇몇 아이디어는 구현이 어렵다고 판단했고, 현실 제약 내에서 유의미한 경험을 만들 수 있는 방탈출 장르를 선택했다. 이 앱은 스토리텔링이 핵심이라 초반에 스토리와 퍼즐 설계에 많은 시간을 투자했다. 예상 플레이 타임은 10~15분으로, 그에 맞춰 난이도와 문제 구성을 설계했다.

[시나리오 구현 이미지 추가 예정]

스토리 설계가 끝난 뒤에는 배경 리소스 사용을 최소화하기 위해 모델링을 가급적 줄이고 에셋 리서치에 집중했다.

[에셋 리서치 이미지 추가 예정]

찾은 에셋을 바탕으로 러프한 공간을 먼저 만들고, 인터랙션이 필요한 에셋부터 우선 배치해 기능을 테스트했다. 방 전체는 Blender에서 러프하게 구성한 뒤 Reality Composer Pro(RCP)로 불러와, 상호작용이 들어가는 에셋만 따로 Blender에서 익스포트해 불러오는 방식으로 작업했다.

에셋을 불러오는 과정에서 텍스처가 깨지는 등의 오류가 자주 발생했다. Blender에서 바로 `.usdz`로 내보내 RCP에 넣으면 문제가 생기는 경우가 많았고, 가장 안정적인 워크플로우는 Blender에서 `.usda`로 내보낸 뒤 Reality Converter나 Reality Composer Pro에서 직접 텍스처를 연결하고 `.usdz`로 다시 내보내는 방법이었다.

러프한 방을 불러와 구성하던 중 큰 문제가 발생했다. Full immersive space의 체감 반경이 예상한 1.5m×1.5m보다 훨씬 작아 약 1m 반경 수준이었고, 플레이어가 방 끝으로 걸어가면 immersive 모드가 해제되어 현실이 보이는 현상이 생겼다. 이 문제를 해결하기 위해 다른 앱들을 분석한 결과, mixed immersive 모드로 전환해 현실 위에 가상 방을 얹는 방식이 유효하다는 것을 확인했다. 실제로는 현실 배경 위에 매우 큰 가상 방을 올려놓는 트릭을 사용해 사용자가 이동해도 immersive 효과가 유지되도록 했다.

하지만 이 방식은 단점도 있었다. 가상 방 내부에서 움직일 때 현실의 물체가 가까워져도 현실이 잘 보이지 않아 주변 장애물에 부딪힐 위험이 있었다. Mixed 모드에서는 현실이 보이는 거리를 조절할 수 없기 때문에, 게임 시작 전에 방 크기 가이드라인을 안내해 주변 공간을 정리하도록 하는 것으로 예방 대책을 마련했다.

이후 퍼즐 풀이에 필요한 인터랙션과 애니메이션을 추가해 기능을 구현했다. 이 과정에서 여러 가지 시행착오가 있었는데, 특히 물리 속성이나 애니메이션 관련 작업은 코드만으로 완전히 동작하지 않는 경우가 많았다. 해결법은 Reality Composer Pro에서 해당 오브젝트에 물리 컴포넌트나 애니메이션을 먼저 추가해주고, 그 상태에서 코드로 세부 값을 설정하는 방식이었다. 애니메이션은 RCP 내 Timeline에 넣어야 정상적으로 재생되는 경우가 있어서 이 부분에서 많은 시간이 소요되었다. 처음 RCP와 워크플로우를 접하는 개발자들이 같은 실수를 반복하지 않도록 주의가 필요하다.

[Reality Composer Pro 에디터 화면 이미지 추가 예정]

6주간의 챌린지가 끝났다. 방탈출에 필요한 기본 기능은 대부분 구현되었고, 추후에는 개체와의 상호작용에 대한 사용성 개선을 더 진행할 계획이다.

갤러리 워크에서 시연한 기술 소개 영상도 제작했다.  
[기술 소개 영상 추가 예정]

챌린지 후 보완할 부분들을 정리하고 한국어·영어·스페인어로 로컬라이제이션하여 앱스토어 심사를 요청했다. 약 1주일간의 심사 끝에 장황한 리젝 사유를 받았고(앱 이름 변경 등 자잘한 수정 요구 포함), 특이하게 애플 측에서 앱의 풀이 과정을 요구하기도 했다. 내부적으로 크게 바꿔야 할 부분은 많지 않아, 심사 피드백에 맞춰 수정한 뒤 재심사를 진행할 예정이다.


## Task
### 공통
- [ ] 공통 사용되는 것들 공용 함수화
	Entity 생성
	customHoverEffect
	애니메이션(view에서 튀어나오는거)
- [ ] 문서화 주석 추가(model이나 공용 파일)


### 프로젝트
#### 프로젝트 리스트
- [x] 프로젝트 생성
    - [x] 애니메이션 다시 확인
    - [x] 로직 viewModel로 이동
    - [x] 잡다한 코드 삭제하여 간소화
    - [x] 안쓰는 파일 삭제
    - [x] 폴더 구조 변경
- [x] 프로젝트 삭제
- [x] 프로젝트 리스트 조회
- [x] 프로젝트 이름 수정
- [ ] 프로젝트 정렬 변경(좌상단 토글)
- [ ] 프로젝트 UI변경(+쉐브론 기능 구현)
- [ ] 프로젝트 선택시 해당 프로젝트의 Library창 띄우도록
	- [ ] 라이브러리에서 뒤로가기로 프로젝트 리스트 화면으로 돌아가기(저장 물어보기 or 나갈 때 자동저장)
- [ ] 데이터 DB에서 불러오면 projectListViewModel 옵셔널로 설정해서 에러 처리나 progressView 만들기

#### 공간 생성
- [ ] 생성 스텝 Ui 변경
- [ ] 예시 이미지 String -> 이미지 에셋으로

### 공간 관련
#### 초기 볼륨 객체
- [x] 초기 대지 생성
- [x] 대지(volume) 회전
- [x] 공간 벽 선택적 표시
- [x] immersive 전환
- [x] immersive와 volume 사물 동기화
- [x] 벽면에 배경 추가
      이미지 사이즈에 상관없이 plane 사이즈에 맞게 이미지가 채워짐
- [x] volume 열리면 projectList -> Library 네비게이션 구현
	- [x] Library -> ProjectList 이동하면 volume 닫기
- [ ] volume에서 추가할 때 anchorEntity에 추가
- [ ] volume 바닥,벽면에 에셋 스냅되도록



#### 벽면에 이미지 교체
Image load하는 함수

`func load(projectName: String, filename: String) throws -> Data`
프로젝트 title, fileName

- [x] 이미지 불러와서 적용 테스트
- [x] 이미지로 머티리얼 입히는 함수 만들기
- [x] 벽면 중앙에 attachment 하기

현재 구조에서 이미지 적용을 진행하려면 ?
- view에서 viewModel 호출
 - 활성화된 프로젝트 찾기


## 진행사항
### 작업 진행사항(10/17)
- [x] 회전 잘 안되는 버그 수정하기.
- [x] 가까운 벽면 투명해지고 애니메이션 되도록 구현.
- [x] 벽면 투명화 로직 이해하기
	- [x] volume관련 리팩토링 진행
- [x] projectListViewModel에서 volumeVM관련 로직 plVM으로 옮기기 (activateScene) 삭제는 swiftDB 도입하면 view에서 처리하기(설계상 모델 컨텍스트 주입을 계속 해줘야해서)
- [x] plview에서 view로직 ViewModel로 옮기기
- [x] viewModel 하나씩 사용하게 변경하고, db도입하면 environment로 말고 stateobject로 viewmodel각자 view에서 관리하기

### 회의 때 안건(10/8)
- volume Scene과 Immersive Scene이 서로 연결되어 있어 데이터를 공유해야 함. 아니면 Scene을 Volume과 Immersive 두 개로 나누지 말고, Scene을 하나 만들고 거기서 volume, Immersive 각 상태에 따라 Scene의 데이터를 받아오는 것으로 구현.
- 볼륨에서 에셋 뒤로 밀어 벽쪽에 다가가면 벽면 기울기에 맞춰 기울어지고 당기면 다시 평면으로 되도록 하는 방안도 고려하면 좋을듯

### 프로젝트 생성 관련
- 현재 이름 설정하는 화면이 없음.
- 생성하는 flow를 여러 depth로 설정하는 것이 아니라, 하나의 화면에서 이름 , 공간, 넓이를 한 번에 선택하는 방법 고려.

### customHover관련
wwdc영상 보고 코드 정리해서 블로그에 글 업로드하기.

### 벽면에 이미지 입히기
**이미지 입힌 Entity 생성 과정**
1. 메쉬 생성
2. 텍스쳐 생성(이미지 로드)
3. 머티리얼 생성(텍스쳐 baseColor로입히기)
4. Entity생성(메쉬, 머티리얼 추가)
5. 포지션 및 스케일 설정
6. Entity 루트에 추가


## 개발 기능별
### volume 벽면 제거
- [x] 벽면 생성 코드 삭제
- [x] Opacity적용 코드 삭제

### 볼륨 Rotation 및 Scale 조절
- [ ] 볼륨 대지 Builder에서 로테이션 및 스케일 조정하는 방식에서, 추가되기 전에 전체 scale조정하는 방식으로 조절.
- **RealityKit volumetric window entity size limit 1.0 meter constraint visionOS 2025**
- [ ] 볼륨 하단 indicator 위치 조정(바닥을 볼륨 영역의 최하단으로 이동 ?)
- [ ] 바닥이 content에 추가되는 것이 아니라 anchor에 추가되도록 구현

**어차피 사이즈 받아오는 단계가 사라지는데, volume과 immersive마다 크기를 저장하고 반환해주는 방식이 나을듯 ?**

### volume 바닥에 이미지 머티리얼 적용 기능 구현
- [ ] 이미지 추가하는 버튼 구현
- [ ] 버튼 클릭하면 이미지 추가하는 ui 띄우기
- [ ] 이미지 선택하면, 구현해놓은 함수로 바닥에 material 적용



## 이슈
### Navigation 배경 중복
`Navigation`을 통해 화면을 이동하면, window가 navigationBar영역에서 겹쳐보이는 현상.
navigation방식이 문제가 아니라, 각 화면마다 `glassBackgroundEffect()`를 추가하여 배경이 겹치게 나오는 현상이였음...

### RealityKit Volume Entity 크기 제한
**RealityKit volumetric window entity size limit 1.0 meter constraint visionOS 2025**